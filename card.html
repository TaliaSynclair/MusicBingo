<!-- card.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Music Bingo - Your Card</title>
  <style>
    table {
  border-collapse: collapse;
  margin: 20px auto;
  text-align: center;
  width: 90vw;       /* 90% of viewport width */
  max-width: 480px;  /* max size on larger screens */
}

th, td {
  box-sizing: border-box;
  border: 2px solid black;
  padding: 5px 5px;   /* bigger padding */
  font-size: 3em;     /* bigger font */
  width: 25vw;          /* 18% of viewport width */
  height: 20vw;         /* square cells */
  max-width: 100px;      /* cap max cell size */
  max-height: 100px;
}

    th {
      background-color: #ccc;
    }
    #playerNameDisplay {
      text-align: center;
      margin-top: 20px;
      font-size: 2.1em;
    }
    #instructions {
      text-align: center;
      margin-top: 30px;
      font-style: italic;
    }
    /* Style for marked cells */
td.marked {
  background-color: lightgreen;
  color: white;
  font-weight: bold;
}
    
#bingo-card > div:nth-child(-n+5) {
  font-size: 4em;
  font-weight: bold;
}

    #bingo-card {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-gap: 10px;
  justify-items: center;
  max-width: 780px;
  margin: 0 auto;
}
#bingo-card-container {
  width: 780px;
  margin: auto;
  text-align: center;
  font-family: Arial, sans-serif;
}
#bingo-card button {
  font-size: 4em;          /* bigger numbers */
  padding: 20px;           /* bigger padding */
  width: 150px;             /* wider buttons */
  height: 150px;            /* taller buttons */
  background-color: #f0f0f0;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
}

#bingo-card button:hover {
  background-color: #f7f7f7;
  transform: scale(1.1);
}
#bingo-card button.marked {
  text-decoration: line-through;
  color: red;
  background-color: #e0e0e0;
}

  </style>
</head>
<body>
  <h1 style="text-align:center;">Music Bingo</h1>
  <div id="playerNameDisplay"></div>

 <div id="bingo-card-container">
  <div id="bingo-card"></div>
</div>


  <div id="instructions">When you need a new card, refresh the page.</div>

  <script>
    // Get player's name from URL parameters
    function getNameFromUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get('name') || 'Player';
    }

    // Number ranges for each column
    const columnRanges = {
      M: [1, 10],
      U: [16, 25],
      S: [31, 40],
      I: [46, 55],
      C: [61, 70]
    };

    // Generate 5 unique random numbers within a range
    function generateNumbers(min, max) {
      const numbers = new Set();
      while (numbers.size < 5) {
        const num = Math.floor(Math.random() * (max - min + 1)) + min;
        numbers.add(num);
      }
      return Array.from(numbers).sort((a, b) => a - b);
    }

    // Build the Bingo card data as an array of arrays (rows)
    function buildBingoCard() {
      const card = [];
      // Generate columns first
      const columns = {};
      for (const col in columnRanges) {
        const [min, max] = columnRanges[col];
        columns[col] = generateNumbers(min, max);
      }
      // Build rows by taking the nth number from each column
      for (let i = 0; i < 5; i++) {
        card[i] = [];
        for (const col of ['M', 'U', 'S', 'I', 'C']) {
          card[i].push(columns[col][i]);
        }
      }
      return card;
    }

    // Render the Bingo card in the table body
function renderCard(card) {
  const bingoCardDiv = document.getElementById('bingo-card');
  bingoCardDiv.innerHTML = '';

  // Add column headers
  const headers = ['M', 'U', 'S', 'I', 'C'];
  headers.forEach(header => {
    const headerDiv = document.createElement('div');
    headerDiv.textContent = header;
    headerDiv.style.fontWeight = 'bold';
    headerDiv.style.fontSize = '1.5em';
    bingoCardDiv.appendChild(headerDiv);
  });

  // Create buttons for each number in the card
  for (let row = 0; row < 5; row++) {
    for (let col = 0; col < 5; col++) {
      const num = card[row][col];
      const btn = document.createElement('button');
      btn.textContent = num;
      btn.addEventListener('click', () => {
        btn.classList.toggle('marked');
      });
      bingoCardDiv.appendChild(btn);
    }
  }
}

    // Main execution
    const playerName = getNameFromUrl();
    document.getElementById('playerNameDisplay').textContent = `Hello, ${playerName}! Here's your card:`;
    const bingoCard = buildBingoCard();
    renderCard(bingoCard);
  </script>
</body>
</html>
